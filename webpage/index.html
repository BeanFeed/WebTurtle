<!DOCTYPE html>
<html lang="en">
    <head>
        <script type="text/javascript">
                window.onload = function() {
                    const Forward = document.getElementById("f");
                    const Back = document.getElementById("b");
                    const Left = document.getElementById("l");
                    const Right = document.getElementById("r");
                    const urll = document.getElementById("url");
                    const con = document.getElementById("con");
                    const dis = document.getElementById("dis");
                    const turtid = document.getElementById("turtid");
                    const turtpass = document.getElementById("turtpass");
                    const constat = document.getElementById("constat");
                
                    con.onclick = function(){
                        let conurl = urll.value;
                        if (conurl == null) return
                        let socket = new WebSocket(conurl);
                        constatus = socket.readyStatus;
                        console.log(constatus);
                        if (constatus == WebSocket.OPEN) {
                            constat.innerHTML = 'Connected';
                        }
                        let msg = {};
                        Forward.onclick = function(){
                            msg[0] = "f";
                            socket.send("f");
                            console.log(msg[0]);
                        }
                        Back.onclick = function () {
                            msg[0] = "b";
                            socket.send(msg[0]);
                            console.log(msg[0]);  
                        }
                        
                        Left.onclick = function () {
                            msg[0] = "l";
                            socket.send(msg[0]);
                            console.log(msg[0]);   
                        }
                        
                        Right.onclick = function () {
                            msg[0] = "r";
                            socket.send(msg[0]);
                            console.log(msg[0]);  
                        }
                        
                        dis.onclick = function () {
                            socket.close();   
                        }
                         socket.onmessage = function (message) {
                             console.log(message);
                         }
                    }  
                }


        </script>
        <link rel="stylesheet" href="style.css">
    </head>
    <body id="center">
        <h1>Turtle Control Page</h1>
        <button id="f">Forward</button>
        <br>
        <button id="l">Left</button>
        <button id="b">Back</button>
        <button id="r">Right</button>
        <br>

        
        Turtle Id:
        <input type="number" id="turtid">
        <br>
        Turtle password: <input type = "text" id = "turtpass">
        <br>
        Url: <input type="text" id="url">
        <button id="con">Connect</button>
        <button id="dis">Disconnect</button>
        <br>
        Connection Status:
        <p id = "constat">Not connected</p>
        

    </body>
</html>
