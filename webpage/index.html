<!DOCTYPE html>
<html lang="en">
    <head>
        <script type="text/javascript">
                window.onload = function() {
                    const Forward = document.getElementById("f");
                    const Back = document.getElementById("b");
                    const Left = document.getElementById("l");
                    const Right = document.getElementById("r");
                    const urll = document.getElementById("url");
                    const con = document.getElementById("con");
                    const dis = document.getElementById("dis");
                    const turtid = document.getElementById("turtid");
                    const turtpass = document.getElementById("turtpass");
                    const constat = document.getElementById("constat");
                    const Up = document.getElementById("u");
                    const Down = document.getElementById("d");
                    const Place = document.getElementById("place");
                    const Break = document.getElementById("break");
                    const Attack = document.getElementById("attack");
                    var message;
                    con.onclick = function(){
                        let conurl = urll.value;
                        if (conurl == null) return
                        let socket = new WebSocket(conurl);
                        socket.onopen = function (conurl) {
                            console.log("Connected To " + urll.value);
                            constat.innerHTML = "Connected";
                        }
                        
                        let msg = {
                            cmd: null,
                            id: null,
                            pass: null,
                            extra: null,
                            fromWss: false,
                            log: true

                        };
                        msg.id = turtid.value;
                        msg.pass = turtpass.value;

                        socket.addEventListener("message", msg => {
                            console.log(JSON.parse(msg.data));

                        });

                        Forward.onclick = function(){
                            msg.cmd = "turtle.forward()"
                            socket.send(JSON.stringify(msg));
                            console.log(JSON.stringify(msg));
                        }
                        Back.onclick = function () {
                            msg.cmd = "turtle.back()"
                            socket.send(JSON.stringify(msg));
                            console.log(JSON.stringify(msg));
                        }
                        
                        Left.onclick = function () {
                            msg.cmd = "turtle.turnLeft()"
                            socket.send(JSON.stringify(msg));
                            console.log(JSON.stringify(msg));   
                        }
                        
                        Right.onclick = function () {
                            msg.cmd = "turtle.turnRight()"
                            socket.send(JSON.stringify(msg));
                            console.log(JSON.stringify(msg));  
                        }
                        
                        Down.onclick = function () {
                            msg.cmd = "turtle.down()"
                            socket.send(JSON.stringify(msg));
                            console.log(JSON.stringify(msg));
                        }

                        Up.onclick = function () {
                            msg.cmd = "turtle.up()"
                            socket.send(JSON.stringify(msg));
                            console.log(JSON.stringify(msg));
                        }

                        Place.onclick = function () {
                            msg.cmd = "turtle.placeDown()"
                            socket.send(JSON.stringify(msg));
                            console.log(JSON.stringify(msg));
                        }

                        Break.onclick = function () {
                            msg.cmd = "turtle.digDown()"
                            socket.send(JSON.stringify(msg));

                            console.log(JSON.stringify(msg));
                        }

                        Attack.onclick = function () {
                            msg.cmd = "turtle.attackDown()"
                            socket.send(JSON.stringify(msg));
                            console.log(JSON.stringify(msg));
                        }

                        dis.onclick = function () {
                            socket.close(); 
                            constat.innerHTML = "Disconnected";
                        }
                    }  
                }


        </script>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <div id="center">
        <h1>Turtle Control Page</h1>
        <button id = "place">Place</button>
        <button id = "break">Break</button>
        <button id= "attack">Attack</button>
        <br>
        <button id="u">Up</button>
        <button id="f">Forward</button>
        <button id="d">Down</button>
        <br>
        <button id="l">Left</button>
        <button id="b">Back</button>
        <button id="r">Right</button>
        <br>

        
        Turtle Id:
        <input type="number" id="turtid">
        <br>
        Turtle password: <input type = "text" id = "turtpass">
        <br>
        Url: <input type="text" id="url">
        <button id="con">Connect</button>
        <button id="dis">Disconnect</button>
        <br>
        Connection Status:
        <p id = "constat">Disconnected</p>
        </div>


        <div>
            <h1>Inventory</h1>
            <table style="border-collapse: collapse;" background="resources/Inventory.png" class="inv">
                <tr class = "one">
                    <td style = "padding-left: 4.4px; padding-right: 0px;" class = "r1"><img class = "slot" id = "slot1" src="resources/Blank.png"></td>
                    <td class = "r1"><img class = "slot" id = "slot2" src="resources/Blank.png"></td>
                    <td class = "r1"><img class = "slot" id = "slot3" src="resources/Blank.png"></td>
                    <td class = "r1"><img class = "slot" id = "slot4" src="resources/Blank.png"></td>
                </tr>

                <tr>
                    <td style = "padding-left: 4.4px; padding-right: 0px;" class = "r2"><img class = "slot" id = "slot5" src="resources/Blank.png"></td>
                    <td class = "r2"><img class = "slot" id = "slot6" src="resources/Blank.png"></td>
                    <td class = "r2"><img class = "slot" id = "slot7" src="resources/Blank.png"></td>
                    <td class = "r2"><img class = "slot" id = "slot8" src="resources/Blank.png"></td>
                </tr>

                <tr>
                    <td style = "padding-left: 4.4px; padding-right: 0px;" class = "r3"><img class = "slot" id = "slot9" src="resources/Blank.png"></td>
                    <td class = "r3"><img class = "slot" id = "slot10" src="resources/Blank.png"></td>
                    <td class = "r3"><img class = "slot" id = "slot11" src="resources/Blank.png"></td>
                    <td class = "r3"><img class = "slot" id = "slot12" src="resources/Blank.png"></td>
                </tr>

                <tr>
                    <td style = "padding-left: 4.4px; padding-right: 0px;" class = "r4"><img class = "slot" id = "slot13" src="resources/Blank.png"></td>
                    <td class = "r4"><img class = "slot" id = "slot14" src="resources/Blank.png"></td>
                    <td class = "r4"><img class = "slot" id = "slot15" src="resources/Blank.png"></td>
                    <td class = "r4"><img class = "slot" id = "slot16" src="resources/Blank.png"></td>
                </tr>

            </table>

        </div>
    </body>
</html>
